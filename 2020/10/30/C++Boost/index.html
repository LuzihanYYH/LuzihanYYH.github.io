<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#2.6.6'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>【CPP】C++的boost学习 - AustinYAN&#39;s Blog</title>
  
  
    <meta name="description" content="学习C++的boost库,了解其中的一些方法">
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>


<body>
  
  <div class="cover-wrapper">
    
      <cover class='cover post half'>
        <div class='cover-body'>
  <div class='a'>
    
    
      <p class="title">我行既道,我身既法</p>
    
    
      <p class="subtitle">天行健,君子以自强不息</p>
    
  </div>
  <div class='b'>
    
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <input type="text" class="input u-search-input" placeholder="" />
          <i class="icon fas fa-search fa-fw"></i>
        </form>
      </div>
    
    <div class='menu navigation'>
      <ul class='cover-list-h'>
        
          
            <li>
              <a class="nav home"
                href="/"
                
                
                id="home">
                <i class='fas fa-book fa-fw'></i>主页
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="/archives"
                
                
                id="archives">
                <i class='fas fa-rss fa-fw'></i>博文
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="https://volantis.js.org/examples/"
                
                
                id="https:volantisjsorgexamples">
                <i class='fas fa-play-circle fa-fw'></i>示例
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="https://volantis.js.org/contributors/"
                
                
                id="https:volantisjsorgcontributors">
                <i class='fas fa-handshake fa-fw'></i>鸣谢
              </a>
            </li>
          
        
      </ul>
    </div>
  </div>
</div>

      </cover>
    
    <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h'>
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
          
            VOLANTIS <b><sup style='color:#3AA757'>2.6.6</sup></b>
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/friends/
                  
                  
                  
                    id="friends"
                  >
                  <i class='fas fa-link fa-fw'></i>友链
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/about/
                  
                  
                  
                    id="about"
                  >
                  <i class='fas fa-info-circle fa-fw'></i>关于
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/2020/10/30/C++Boost/">
      【CPP】C++的boost学习
    </a>
  </h1>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://blog.csdn.net/Austin_Yan" target="_blank" rel="nofollow noopener">
    <img src="https://cdn.jsdelivr.net/gh/AustinYANyh/Image@1.0/head1.jpg">
    <p>染墨若流云</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/Cpp/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>Cpp</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：Oct 30, 2020</p>
  </a>
</div>

            
          
            
              
  
    <div class="new-meta-item browse busuanzi">
      <a class='notlink'>
        <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
        <p>
          <span id="busuanzi_value_page_pv"></span>
        </p>
      </a>
    </div>
  


            
          
            
              
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>6.6k words</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>33 min</p>
    </a>
  </div>


            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <p>学习C++的boost库,了解其中的一些方法</p>
<a id="more"></a>

<h2 id="boost库的学习"><a href="#boost库的学习" class="headerlink" title="boost库的学习"></a>boost库的学习</h2><h3 id="学习字符串处理"><a href="#学习字符串处理" class="headerlink" title="学习字符串处理"></a>学习字符串处理</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _SILENCE_CXX17_OLD_ALLOCATOR_MEMBERS_DEPRECATION_WARNING</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//学习字符串处理</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/algorithm/string.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello World!\n"</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> s = <span class="string">"Hello World!"</span>;</span><br><span class="line">	<span class="comment">//使用boost库,将字符串转为大写</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::algorithm::to_upper_copy(s) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用STL标准算法库,将字符串转为大写</span></span><br><span class="line">	transform(s.begin(), s.end(), s.begin(), towupper);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//删除出现的第一个"O"</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; boost::algorithm::erase_first_copy(s, "O") &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//删除第二个出现的"O",索引是1</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; boost::algorithm::erase_nth_copy(s, "O", 1) &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//删除所有的"O"</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; boost::algorithm::erase_all_copy(s, "O") &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//auto r = boost::algorithm::find_first(s, "WO");</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; r &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//将第一个出现的"O"替换成"o"</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; boost::algorithm::replace_first_copy(s, "O", "o") &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//boost库将vector中的字符串拼接</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; v;</span><br><span class="line">	v.push_back(<span class="string">"He"</span>);</span><br><span class="line">	v.push_back(<span class="string">"LLO"</span>);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::algorithm::join(v, <span class="string">" "</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//拼接char*</span></span><br><span class="line">	<span class="keyword">char</span> S[<span class="number">50</span>] = <span class="string">"lubaobao"</span>;</span><br><span class="line">	<span class="keyword">char</span> aa[<span class="number">8</span>] = <span class="string">" xihuan"</span>;</span><br><span class="line">	<span class="keyword">char</span> bb[<span class="number">10</span>] = <span class="string">" fujunjun"</span>;</span><br><span class="line">	<span class="comment">//sprintf(S, "%s%s%s", S, aa, bb);</span></span><br><span class="line">	<span class="comment">//std::cout &lt;&lt; S &lt;&lt; std::endl;</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">strcat</span>(S, aa);</span><br><span class="line">	<span class="built_in">strcat</span>(S, bb);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; S &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//string的拼接</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> aaa = <span class="string">"lubaobao"</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> bbb = <span class="string">" xihuan"</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> ccc = <span class="string">" fujunjun"</span>;</span><br><span class="line">	aaa.append(bbb);</span><br><span class="line">	aaa.append(ccc);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; aaa &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//判断字符串中是否含有子串</span></span><br><span class="line">	<span class="keyword">bool</span> res = boost::algorithm::contains(s, <span class="string">"HE"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习文件系统"><a href="#学习文件系统" class="headerlink" title="学习文件系统"></a>学习文件系统</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习文件系统</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/filesystem.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">TransToG</span><span class="params">(<span class="keyword">double</span> kb)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> kb / <span class="number">1024</span> / <span class="number">1024</span> / <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boost::<span class="function">filesystem::path <span class="title">path1</span><span class="params">(<span class="string">"C:\\Windows"</span>)</span></span>;</span><br><span class="line">	<span class="comment">//boost::filesystem::path* path1 = new boost::filesystem::path("C:\\");</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//判断path是不是目录</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::filesystem::is_directory(path1) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	boost::filesystem::file_status filestatus = boost::filesystem::status(path1);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::filesystem::is_directory(filestatus) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//获得文件的最后修改时间</span></span><br><span class="line">		boost::<span class="function">filesystem::path <span class="title">path2</span><span class="params">(<span class="string">"C:\\Users\\29572\\Desktop\\vsbg.jpg"</span>)</span></span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="keyword">time_t</span> time = boost::filesystem::last_write_time(path2);</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ctime(&amp;time) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//获取磁盘空间信息</span></span><br><span class="line">		boost::<span class="function">filesystem::path <span class="title">path3</span><span class="params">(<span class="string">"C:\\"</span>)</span></span>;</span><br><span class="line">		boost::filesystem::space_info pathinfo = boost::filesystem::space(path3);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//设置小数精度</span></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::setiosflags(<span class="built_in">std</span>::ios::fixed) &lt;&lt; <span class="built_in">std</span>::setprecision(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; TransToG(pathinfo.capacity) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; TransToG(pathinfo.<span class="built_in">free</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; TransToG(pathinfo.available) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//获取程序当前目录</span></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::filesystem::current_path() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span> (boost::filesystem::filesystem_error e)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习智能指针"><a href="#学习智能指针" class="headerlink" title="学习智能指针"></a>学习智能指针</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习智能指针</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;windows.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Window_Handle</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Window_Handle(HANDLE h) :_handle(h)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	~Window_Handle()</span><br><span class="line">	&#123;</span><br><span class="line">		CloseHandle(_handle);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	Window_Handle(<span class="keyword">const</span> Window_Handle* data)</span><br><span class="line">	&#123;</span><br><span class="line">		_handle = data-&gt;_handle;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//通过成员函数访问到private的成员变量</span></span><br><span class="line">	<span class="function">HANDLE <span class="title">handle</span><span class="params">()</span> <span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _handle;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	HANDLE _handle;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//通过 OpenProcess() 打开的资源不需要显示的调用 CloseHandle() 来关闭。</span></span><br><span class="line">	<span class="comment">//当然，应用程序终止时资源也会随之关闭。 </span></span><br><span class="line">	<span class="comment">//然而，在更加复杂的应用程序里， windows_handle 类确保当一个资源不再使用时就能正确的关闭。 </span></span><br><span class="line">	<span class="comment">//某个资源一旦离开了它的作用域——上例中 h 的作用域在 main() 函数的末尾——它的析构函数会被自动的调用，</span></span><br><span class="line">	<span class="comment">//相应的资源也就释放掉了</span></span><br><span class="line">	<span class="function">Window_Handle <span class="title">h</span><span class="params">(OpenProcess(PROCESS_SET_INFORMATION, <span class="literal">false</span>, GetCurrentProcessId()))</span></span>;</span><br><span class="line">	<span class="comment">//_handle不可访问,需要通过成员函数访问</span></span><br><span class="line">	SetPriorityClass(h.handle(), HIGH_PRIORITY_CLASS);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="built_in">auto_ptr</span>&lt;<span class="built_in">string</span>&gt; <span class="title">p1</span><span class="params">(<span class="keyword">new</span> <span class="built_in">string</span>(<span class="string">"lubaobao love fujunjun"</span>))</span></span>;</span><br><span class="line">	<span class="built_in">auto_ptr</span>&lt;<span class="built_in">string</span>&gt; p2;</span><br><span class="line"></span><br><span class="line">	p2 = p1;</span><br><span class="line">	<span class="comment">//此时,p1的所有权已被剥夺,p1变为empty,访问p1会报错</span></span><br><span class="line">	<span class="comment">//p1-&gt;append(" heihei");</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="built_in">unique_ptr</span>&lt;<span class="built_in">string</span>&gt; <span class="title">p3</span><span class="params">(<span class="keyword">new</span> <span class="built_in">string</span>(<span class="string">"lubaobao"</span>))</span></span>;</span><br><span class="line">	<span class="built_in">unique_ptr</span>&lt;<span class="built_in">string</span>&gt; p4;</span><br><span class="line">	<span class="comment">//此时编译器会报错(尝试引用已删除的函数),因为p3、p4是单独占用模式</span></span><br><span class="line">	<span class="comment">//p3 = p4;	</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//但如果是临时右值,编译器允许</span></span><br><span class="line">	p3 = <span class="built_in">unique_ptr</span>&lt;<span class="built_in">string</span>&gt;(<span class="keyword">new</span> <span class="built_in">string</span>(<span class="string">"fujunjun"</span>));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">string</span> tmp = <span class="string">"luzihan is lubaobao"</span>;</span><br><span class="line">	<span class="function"><span class="built_in">shared_ptr</span>&lt;<span class="built_in">string</span>&gt; <span class="title">p5</span><span class="params">(&amp;tmp)</span></span>;</span><br><span class="line">	<span class="built_in">shared_ptr</span>&lt;<span class="built_in">string</span>&gt; p6;</span><br><span class="line">	p6 = p5;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p6.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.unique() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="built_in">shared_ptr</span>&lt;<span class="built_in">string</span>&gt; <span class="title">p7</span><span class="params">(<span class="keyword">new</span> <span class="built_in">string</span>(<span class="string">"yanyunhao is funjunjun"</span>))</span></span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.get() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p7.get() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	swap(p5, p7);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.get() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p7.get() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p6.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	p6 = p5;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p6.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//在VS 2017以上版本,将引用计数置为0</span></span><br><span class="line">	p5.reset();</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p5.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; p6.use_count() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="一个简单理解多态的Demo"><a href="#一个简单理解多态的Demo" class="headerlink" title="一个简单理解多态的Demo"></a>一个简单理解多态的Demo</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一个简单理解多态的Demo</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">softbanker</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	softbanker()</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">virtual</span>	<span class="keyword">void</span> <span class="title">DoSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"save money"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">softbanker1</span> :</span><span class="keyword">public</span> softbanker</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">DoSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"take money"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">softbanker2</span> :</span><span class="keyword">public</span> softbanker</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">DoSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"change money"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	softbanker* sbanker = <span class="keyword">new</span> softbanker();</span><br><span class="line">	sbanker-&gt;DoSomething();</span><br><span class="line"></span><br><span class="line">	sbanker = <span class="keyword">new</span> softbanker1();</span><br><span class="line">	sbanker-&gt;DoSomething();</span><br><span class="line"></span><br><span class="line">	sbanker = <span class="keyword">new</span> softbanker2();</span><br><span class="line">	sbanker-&gt;DoSomething();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">delete</span> sbanker;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习函数对象"><a href="#学习函数对象" class="headerlink" title="学习函数对象"></a>学习函数对象</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习函数对象</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;functional&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/bind.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//for_each中要求的函数仅能接受一个参数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; i + j &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Compare</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> i &lt; j;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">add</span> :</span><span class="keyword">public</span> binary_function&lt;<span class="keyword">int</span>, <span class="keyword">int</span>, <span class="keyword">void</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span><span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; i + j &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v&#123; <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span> &#125;;</span><br><span class="line">	<span class="comment">//for_each(v.begin(), v.end(), Print);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//遍历打印v中的每个数+10</span></span><br><span class="line">	for_each(v.begin(), v.end(), bind1st(add(), <span class="number">10</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用boost库中的bind方法</span></span><br><span class="line">	<span class="comment">//_1,_2,_3这些都是占位符,Add是二元函数,传入参数10 ,_1将v数组中的元素传入</span></span><br><span class="line">	for_each(v.begin(), v.end(), boost::bind(Add, <span class="number">10</span>, _1));</span><br><span class="line"></span><br><span class="line">	swap(v[<span class="number">0</span>], v[<span class="number">1</span>]);</span><br><span class="line">	for_each(v.begin(), v.end(), Print);</span><br><span class="line">	<span class="comment">//Compare是一个二元函数,_1,_2一次传入v数组中两个数</span></span><br><span class="line">	sort(v.begin(), v.end(), boost::bind(Compare, _1, _2));</span><br><span class="line">	for_each(v.begin(), v.end(), Print);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//不像for_each只能使用一元函数作为参数</span></span><br><span class="line">	<span class="comment">//sort中的比较方法可以是多元,上面的bind方法其实不需要</span></span><br><span class="line">	sort(v.begin(), v.end(), Compare);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//不需要改变Compare的定义,就可以改变是升序还是降序</span></span><br><span class="line">	sort(v.begin(), v.end(), boost::bind(Compare, _2, _1));</span><br><span class="line">	for_each(v.begin(), v.end(), Print);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习事件处理"><a href="#学习事件处理" class="headerlink" title="学习事件处理"></a>学习事件处理</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习事件处理</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/signals2.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//为了将信号槽函数的返回值写出至标准输出流</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/optional/optional_io.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello World!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Func1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Func1 Called"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Func2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Func3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> my_max_element</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">max_element</span></span></span><br><span class="line"><span class="class">	&#123;</span></span><br><span class="line">		<span class="keyword">typedef</span> T result_type;</span><br><span class="line">		<span class="keyword">template</span>&lt;<span class="keyword">typename</span> InputIterator&gt;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//max_element的返回值为_Fwdlt</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">		<span class="function">T <span class="title">operator</span><span class="params">()</span><span class="params">(InputIterator first, InputIterator last)</span><span class="keyword">const</span></span></span><br><span class="line"><span class="function">		</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> *<span class="built_in">std</span>::max_element(first, last);</span><br><span class="line">		&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">		<span class="function">T <span class="title">operator</span><span class="params">()</span><span class="params">(InputIterator first, InputIterator last)</span><span class="keyword">const</span></span></span><br><span class="line"><span class="function">		</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> T(first, last);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boost::signals2::signal&lt;<span class="keyword">void</span>()&gt; sig;</span><br><span class="line">	<span class="comment">//sig.connect(Func);</span></span><br><span class="line">	<span class="comment">//sig.connect(Func1);</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//重载方式指定执行顺序</span></span><br><span class="line">	sig.connect(<span class="number">1</span>, Func);</span><br><span class="line">	sig.connect(<span class="number">0</span>, Func1);</span><br><span class="line">	sig();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//释放与绑定信号的关联</span></span><br><span class="line">	sig.disconnect(Func1);</span><br><span class="line">	sig();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//清除所有关联的信号</span></span><br><span class="line">	sig.disconnect_all_slots();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//函数被关联至信号执行后的返回值会被覆盖,只保留最后一个</span></span><br><span class="line">	<span class="comment">//注意signal&lt;&gt;函数的返回值类型</span></span><br><span class="line">	boost::signals2::signal&lt;<span class="keyword">int</span>()&gt; new_sig;</span><br><span class="line">	new_sig.connect(Func3);</span><br><span class="line">	new_sig.connect(Func2);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; new_sig() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//保留每个返回值,重载()操作符,返回最大的其中一个返回值</span></span><br><span class="line">	<span class="comment">//boost::signals2::signal&lt;int(), my_max_element::max_element&lt;int&gt;&gt; max_sig;</span></span><br><span class="line">	boost::signals2::signal&lt;<span class="keyword">int</span>(), my_max_element::max_element&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&gt; max_sig;</span><br><span class="line">	max_sig.connect(Func3);</span><br><span class="line">	max_sig.connect(Func2);</span><br><span class="line">	<span class="comment">//cout &lt;&lt; max_sig() &lt;&lt; endl;</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sig_return_value;</span><br><span class="line">	sig_return_value = max_sig();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> e : sig_return_value)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习多线程"><a href="#学习多线程" class="headerlink" title="学习多线程"></a>学习多线程</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习多线程</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Wait</span><span class="params">(<span class="keyword">int</span> seconds)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//sleep函数区别于Sleep,位于this_thread命名空间</span></span><br><span class="line">	<span class="comment">//seconds函数用于获得一个精确的时间,位于boost库的DateTime</span></span><br><span class="line">	boost::this_thread::sleep(boost::posix_time::seconds(seconds));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">boost::mutex mutex;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Thread_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			Wait(<span class="number">1</span>);</span><br><span class="line">			<span class="comment">//mutex.lock();</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">//lock_guard类的构造函数中自动调用lock()</span></span><br><span class="line">			<span class="comment">//lock_guard类的析构函数中自动调用unlock()</span></span><br><span class="line">			<span class="function">boost::lock_guard&lt;boost::mutex&gt; <span class="title">lock</span><span class="params">(mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">			<span class="comment">//mutex.unlock();</span></span><br><span class="line"></span><br><span class="line">			<span class="comment">//lock_guard的生命周期为for循环进入到结束</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::this_thread::get_id() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//中断后会抛出一个thread_interrupted异常</span></span><br><span class="line">	<span class="keyword">catch</span> (boost::thread_interrupted&amp;)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">boost::timed_mutex mutex;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Thread_thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		Wait(<span class="number">1</span>);</span><br><span class="line">		<span class="function">boost::unique_lock&lt;boost::timed_mutex&gt; <span class="title">lock</span><span class="params">(mutex, boost::try_to_lock)</span></span>;</span><br><span class="line">		<span class="keyword">if</span> (!lock.owns_lock())</span><br><span class="line">			lock.timed_lock(boost::get_system_time() + boost::posix_time::seconds(<span class="number">1</span>));</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::this_thread::get_id() &lt;&lt; <span class="string">": "</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		boost::timed_mutex* m = lock.release();</span><br><span class="line">		m-&gt;unlock();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; random_numbers;</span><br><span class="line">boost::shared_mutex shared_mutex;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fill</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::srand(<span class="keyword">static_cast</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt;(<span class="built_in">std</span>::time(<span class="number">0</span>)));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//这里改变了random_numers的内容,需要独占资源,使用独占锁</span></span><br><span class="line">		<span class="function">boost::unique_lock&lt;boost::shared_mutex&gt; <span class="title">lock</span><span class="params">(shared_mutex)</span></span>;</span><br><span class="line">		random_numbers.push_back(<span class="built_in">std</span>::rand());</span><br><span class="line"></span><br><span class="line">		<span class="comment">//独占锁需要显式调用unlock</span></span><br><span class="line">		lock.unlock();</span><br><span class="line"></span><br><span class="line">		<span class="comment">//等待时间放在最后为了确保random_numbers里至少有一个数据</span></span><br><span class="line">		Wait(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		Wait(<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//虽然写到了标准输出,但是不操作random_numbers,所以可以共享互斥体</span></span><br><span class="line">		<span class="function">boost::shared_lock&lt;boost::shared_mutex&gt; <span class="title">lock</span><span class="params">(shared_mutex)</span></span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; random_numbers.back() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">boost::mutex r_mutex;</span><br><span class="line">boost::condition_variable_any condition;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fill</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::srand(<span class="keyword">static_cast</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt; (<span class="built_in">std</span>::time(<span class="number">0</span>)));</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function">boost::unique_lock&lt;boost::mutex&gt; <span class="title">lock</span><span class="params">(r_mutex)</span></span>;</span><br><span class="line">		random_numbers.push_back(<span class="built_in">std</span>::rand());</span><br><span class="line"></span><br><span class="line">		<span class="comment">//数据放完后,size相等,跳出循环,唤醒wait线程</span></span><br><span class="line">		condition.notify_all();</span><br><span class="line"></span><br><span class="line">		<span class="comment">//这边进入等待,直到print出数据,size增加,唤醒这边的wait</span></span><br><span class="line">		condition.wait(r_mutex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">std</span>::<span class="keyword">size_t</span> next_size = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="function">boost::unique_lock&lt;boost::mutex&gt; <span class="title">lock</span><span class="params">(r_mutex)</span></span>;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//数据没拿到一直wait</span></span><br><span class="line">		<span class="keyword">while</span> (random_numbers.size() != next_size)</span><br><span class="line">			condition.wait(r_mutex);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//size相等,被唤醒</span></span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; random_numbers.back() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		++next_size;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//唤醒插入数据的线程的wait</span></span><br><span class="line">		condition.notify_all();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Sum</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		Wait(<span class="number">1</span>);</span><br><span class="line">		<span class="comment">//只有读操作,</span></span><br><span class="line">		<span class="function">boost::shared_lock&lt;boost::shared_mutex&gt; <span class="title">lock</span><span class="params">(shared_mutex)</span></span>;</span><br><span class="line">		sum += random_numbers.back();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="comment">//静态变量done,srand执行了只一次,生成的随机数2/3是同一个</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitNumber</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//第二次进来done已经变成true了</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">bool</span> done = <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span> (!done)</span><br><span class="line">	&#123;</span><br><span class="line">		done = <span class="literal">true</span>;</span><br><span class="line">		<span class="built_in">std</span>::srand(<span class="keyword">static_cast</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt;(<span class="built_in">std</span>::time(<span class="number">0</span>)));</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//同一时间完成初始化的话,随机数还是有可能一样</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitNumber</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boost::thread_specific_ptr&lt;<span class="keyword">bool</span>&gt; tls;</span><br><span class="line">	<span class="keyword">if</span> (!tls.get())</span><br><span class="line">		<span class="comment">//reset参数是指针,C++ 的new出来的是指针,C# 的new出来的是对象</span></span><br><span class="line">		tls.reset(<span class="keyword">new</span> <span class="keyword">bool</span>(<span class="literal">false</span>));</span><br><span class="line">	<span class="keyword">if</span> (!*tls)</span><br><span class="line">	&#123;</span><br><span class="line">		*tls = <span class="literal">true</span>;</span><br><span class="line">		<span class="built_in">std</span>::srand(<span class="keyword">static_cast</span>&lt;<span class="keyword">unsigned</span> <span class="keyword">int</span>&gt;(<span class="built_in">std</span>::time(<span class="number">0</span>)));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GenerateNumber</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	InitNumber();</span><br><span class="line">	<span class="keyword">int</span> i = <span class="built_in">std</span>::rand();</span><br><span class="line">	<span class="function">boost::unique_lock&lt;boost::mutex&gt; <span class="title">lock</span><span class="params">(r_mutex)</span></span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="function">boost::thread <span class="title">t</span><span class="params">(Thread_thread)</span></span>;</span><br><span class="line">	Wait(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//获得当前线程的线程ID</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::this_thread::get_id() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//3秒后t线程被终止,打印结果为1,2,3</span></span><br><span class="line">	t.interrupt();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//join的作用是阻塞调用,直到调用join的线程运行结束</span></span><br><span class="line">	t.join();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="comment">//如果函数内不加mutex,可能输出如下:</span></span><br><span class="line">	<span class="comment">//11</span></span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">	<span class="comment">//如果函数内加mutex,输出如下:</span></span><br><span class="line">	<span class="comment">//1</span></span><br><span class="line">	<span class="comment">//1</span></span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	<span class="comment">//2</span></span><br><span class="line">	<span class="comment">//...</span></span><br><span class="line">	<span class="function">boost::thread <span class="title">t1</span><span class="params">(Thread_thread)</span></span>;</span><br><span class="line">	<span class="function">boost::thread <span class="title">t2</span><span class="params">(Thread_thread)</span></span>;</span><br><span class="line"></span><br><span class="line">	t1.join();</span><br><span class="line">	t2.join();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="function">boost::thread <span class="title">thread1</span><span class="params">(Fill)</span></span>;</span><br><span class="line">	<span class="function">boost::thread <span class="title">thread2</span><span class="params">(Print)</span></span>;</span><br><span class="line">	<span class="comment">//boost::thread thread3(Sum);</span></span><br><span class="line"></span><br><span class="line">	thread1.join();</span><br><span class="line">	thread2.join();</span><br><span class="line">	<span class="comment">//thread3.join();</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	boost::thread thread[<span class="number">3</span>];</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">		thread[i] = boost::thread(GenerateNumber);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; ++i)</span><br><span class="line">		thread[i].join();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习异步输入输出"><a href="#学习异步输入输出" class="headerlink" title="学习异步输入输出"></a>学习异步输入输出</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习异步输入输出</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/thread.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line">boost::asio::io_service service;</span><br><span class="line"></span><br><span class="line"><span class="comment">//参数好像必须要传一个boost库提供的错误码(引用类型)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Async_Cout</span><span class="params">(<span class="keyword">const</span> boost::system::error_code&amp; ec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"lubaobao shigezhu"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Async_Cout1</span><span class="params">(<span class="keyword">const</span> boost::system::error_code&amp; ec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"lubaobao nengchi nengshui"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Myrun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	service.run();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boost::<span class="function">asio::deadline_timer <span class="title">timer</span><span class="params">(service, boost::posix_time::seconds(<span class="number">5</span>))</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	timer.async_wait(Async_Cout);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"async is right"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//这里调用的run是阻塞式的,如果不是阻塞的,main函数结束调用后程序退出会把异步的方法中断掉</span></span><br><span class="line">	service.run();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	boost::<span class="function">asio::deadline_timer <span class="title">timer1</span><span class="params">(service, boost::posix_time::seconds(<span class="number">5</span>))</span></span>;</span><br><span class="line"></span><br><span class="line">	timer.async_wait(Async_Cout);</span><br><span class="line">	timer1.async_wait(Async_Cout1);</span><br><span class="line"></span><br><span class="line">	<span class="function">boost::thread <span class="title">thread1</span><span class="params">(Myrun)</span></span>;</span><br><span class="line">	<span class="function">boost::thread <span class="title">thread2</span><span class="params">(Myrun)</span></span>;</span><br><span class="line">	thread1.join();</span><br><span class="line">	thread2.join();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习boost的网络编程-未完"><a href="#学习boost的网络编程-未完" class="headerlink" title="学习boost的网络编程(未完)"></a>学习boost的网络编程(未完)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习boost的网络编程(未完)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/asio.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/array.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line">boost::asio::io_service io_service;						<span class="comment">//io对象</span></span><br><span class="line">boost::asio::ip::<span class="function">tcp::resolver <span class="title">resolver</span><span class="params">(io_service)</span></span>;	<span class="comment">//解析器</span></span><br><span class="line">boost::asio::ip::<span class="function">tcp::socket <span class="title">sock</span><span class="params">(io_service)</span></span>;			<span class="comment">//socket对象</span></span><br><span class="line">boost::<span class="built_in">array</span>&lt;<span class="keyword">char</span>, 4096&gt; buffer;						<span class="comment">//缓冲区</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Read_Handler</span><span class="params">(<span class="keyword">const</span> boost::system::error_code&amp; ec, <span class="built_in">std</span>::<span class="keyword">size_t</span> bytes_transferred)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!ec)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">string</span>(buffer.data(), bytes_transferred) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		sock.async_read_some(boost::asio::buffer(buffer), Read_Handler);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Connect_Handler</span><span class="params">(<span class="keyword">const</span> boost::system::error_code&amp; ec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!ec)</span><br><span class="line">	&#123;</span><br><span class="line">		boost::asio::write(sock, boost::asio::buffer(<span class="string">"GET / HTTP 1.1\r\nHost: baidu.com\r\n\r\n"</span>));</span><br><span class="line">		sock.async_read_some(boost::asio::buffer(buffer), Read_Handler);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Resolve_Handler</span><span class="params">(<span class="keyword">const</span> boost::system::error_code&amp; ec, boost::asio::ip::tcp::resolver::iterator it)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (!ec)</span><br><span class="line">	&#123;</span><br><span class="line">		sock.async_connect(*it, Connect_Handler);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boost::asio::ip::tcp::<span class="function">resolver::query <span class="title">query</span><span class="params">(<span class="string">"www.baidu.com"</span>, <span class="string">"8080"</span>)</span></span>;</span><br><span class="line">	resolver.async_resolve(query, Resolve_Handler);</span><br><span class="line">	io_service.run();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习进程间通讯"><a href="#学习进程间通讯" class="headerlink" title="学习进程间通讯"></a>学习进程间通讯</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习进程间通讯</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/shared_memory_object.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/mapped_region.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/bind.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/windows_shared_memory.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/managed_shared_memory.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/containers/string.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/allocators/allocator.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/interprocess/sync/named_mutex.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">boost::interprocess::managed_shared_memory* atomic_sharedmemory;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Construct_func</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	atomic_sharedmemory-&gt;construct&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_1"</span>)(<span class="number">37</span>);</span><br><span class="line">	atomic_sharedmemory-&gt;construct&lt;<span class="keyword">float</span>&gt;(<span class="string">"Float_1"</span>)(<span class="number">37.13</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> (*pf)();</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//boost提供的共享内存类，第一个参数指定存在时打开，不存在就创建，第二个参数是共享内存的名字，第三个参数指定共享内存是否可读可写</span></span><br><span class="line">	boost::<span class="function">interprocess::shared_memory_object <span class="title">shared_memeroy</span><span class="params">(boost::interprocess::open_or_create, <span class="string">"lubaobao"</span>, boost::interprocess::read_write)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//申请共享内存的大小,如果共享内存不是可读可写状态下使用会抛出异常</span></span><br><span class="line">	shared_memeroy.truncate(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//获取共享内存的名字</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; shared_memeroy.get_name() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	boost::interprocess::<span class="keyword">offset_t</span> size;</span><br><span class="line">	<span class="keyword">if</span> (shared_memeroy.get_size(size))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; size &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//同一个共享内存,映射两个map,地址不同,大小一样</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	boost::<span class="function">interprocess::mapped_region <span class="title">region1</span><span class="params">(shared_memeroy, boost::interprocess::read_write)</span></span>;</span><br><span class="line">	<span class="comment">//hex用来进行十六进制表示,十进制输出</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="string">"0x"</span> &lt;&lt; region1.get_address() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::dec &lt;&lt; region1.get_size() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//dec用来进行八进制表示,十进制输出</span></span><br><span class="line">	boost::<span class="function">interprocess::mapped_region <span class="title">region2</span><span class="params">(shared_memeroy, boost::interprocess::read_write)</span></span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::hex &lt;&lt; <span class="string">"0x"</span> &lt;&lt; region2.get_address() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::dec &lt;&lt; region2.get_size() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	boost::<span class="function">interprocess::mapped_region <span class="title">region1</span><span class="params">(shared_memeroy, boost::interprocess::read_write)</span></span>;</span><br><span class="line">	boost::<span class="function">interprocess::mapped_region <span class="title">region2</span><span class="params">(shared_memeroy, boost::interprocess::read_only)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//区域1的开头被写入数字37</span></span><br><span class="line">	<span class="keyword">int</span>* it1 = <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>*&gt;(region1.get_address());</span><br><span class="line">	*it1 = <span class="number">37</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//读取区域2开头位置,内容也是37</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//两个区域其实访问的是同一块共享内存</span></span><br><span class="line">	<span class="keyword">int</span>* it2 = <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>*&gt;(region2.get_address());</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *it2 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//remove函数用来删除开辟出的共享内存,位于shared_memory_object命名空间内,重新启动后会自动删除,windows情况下不会删除,所以windows下必须remove</span></span><br><span class="line">	<span class="keyword">bool</span> remove = boost::interprocess::shared_memory_object::remove(<span class="string">"lubaobao"</span>);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; remove &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//windows专用的共享内存类,第四个参数为共享内存的大小,最后一个程序终止后会自动删除</span></span><br><span class="line">	boost::<span class="function">interprocess::windows_shared_memory <span class="title">windows_sharedmemory</span><span class="params">(boost::interprocess::open_or_create, <span class="string">"fujunjun"</span>, boost::interprocess::read_write, <span class="number">1024</span>)</span></span>;</span><br><span class="line">	boost::interprocess::shared_memory_object::remove(<span class="string">"fujunjun"</span>);</span><br><span class="line"></span><br><span class="line">	boost::interprocess::shared_memory_object::remove(<span class="string">"lubaobao"</span>);</span><br><span class="line">	<span class="comment">//不需要指定是否可读可写</span></span><br><span class="line">	boost::<span class="function">interprocess::managed_shared_memory <span class="title">managed_sharedmemory</span><span class="params">(boost::interprocess::open_or_create, <span class="string">"lubaobao"</span>, <span class="number">1024</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//construct后必须指定类型</span></span><br><span class="line">	<span class="keyword">int</span>* i = managed_sharedmemory.construct&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer"</span>)(<span class="number">80</span>);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//find方法作用是在共享内存中找到名为Integer的变量,返回类型是pair</span></span><br><span class="line">	<span class="comment">//pair是将两个(不同类型)数据组合成一个数据,通常在函数需要返回两个数据时使用,数组也可以返回多个数据但是类型必须一致</span></span><br><span class="line">	<span class="built_in">std</span>::pair&lt;<span class="keyword">int</span>*, <span class="built_in">std</span>::<span class="keyword">size_t</span>&gt; pair = managed_sharedmemory.find&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer"</span>);</span><br><span class="line">	<span class="keyword">if</span> (pair.first)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; pair.first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *pair.first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//second用于判断申请出的是变量还是数组,如果是变量second为1,如果是数组,second是数组元素的个数,所有元素都被初始化为99</span></span><br><span class="line">	<span class="keyword">int</span>* ii = managed_sharedmemory.construct&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_array"</span>)[<span class="number">10</span>](<span class="number">99</span>);</span><br><span class="line">	pair = managed_sharedmemory.find&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_array"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (pair.first)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *pair.first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; pair.second &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果对象已存在,construct会失败,或者申请的数组长度大于共享内存的大小,会抛出bad alloc异常</span></span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">int</span>* iii = managed_sharedmemory.construct&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_more"</span>)[<span class="number">4096</span>](<span class="number">99</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span> (<span class="keyword">const</span> boost::interprocess::bad_alloc&amp; ec)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ec.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//destroy函数用于删除在共享内存中创建的对象,使用方法为 共享内存对象名+.访问</span></span><br><span class="line">	managed_sharedmemory.destroy&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_array"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//如果不重新find,pair不会更新</span></span><br><span class="line">	pair = managed_sharedmemory.find&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_array"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//对象已被删除,返回nullptr,不可以解引用</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; pair.first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//在共享内存上使用string</span></span><br><span class="line">	boost::interprocess::shared_memory_object::remove(<span class="string">"lubaobao"</span>);</span><br><span class="line">	boost::<span class="function">interprocess::managed_shared_memory <span class="title">str_sharedmemory</span><span class="params">(boost::interprocess::open_or_create, <span class="string">"luer"</span>, <span class="number">1024</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//根据boost库的提示,传入对应的参数</span></span><br><span class="line">	<span class="keyword">typedef</span> boost::interprocess::allocator&lt;<span class="keyword">char</span>, boost::interprocess::managed_shared_memory::segment_manager&gt; CharAllocator;</span><br><span class="line">	<span class="keyword">typedef</span> boost::interprocess::basic_string&lt;<span class="keyword">char</span>, <span class="built_in">std</span>::char_traits&lt;<span class="keyword">char</span>&gt;, CharAllocator&gt; <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//find_or_construct函数作用是存在对象就找,不存在就构建&lt;&gt;中传入类型,最后一个()中第一个参数是内容,第二个参数是共享内存的段管理器</span></span><br><span class="line">	<span class="built_in">string</span>* s = str_sharedmemory.find_or_construct&lt;<span class="built_in">string</span>&gt;(<span class="string">"Str"</span>)(<span class="string">"lu baobao love"</span>, str_sharedmemory.get_segment_manager());</span><br><span class="line">	s-&gt;insert(<span class="number">14</span>, <span class="string">" fu jun jun"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *s &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用完必须清掉,否则会持续写入</span></span><br><span class="line">	boost::interprocess::shared_memory_object::remove(<span class="string">"luer"</span>);</span><br><span class="line"></span><br><span class="line">	atomic_sharedmemory = <span class="keyword">new</span> boost::interprocess::managed_shared_memory(boost::interprocess::open_or_create, <span class="string">"luer"</span>, <span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">	pf = Construct_func;</span><br><span class="line">	<span class="comment">//atomic_func的要求是无参,无返回值,所以使用boost库的bind方法把参数传递</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//但是,boost库提供的示例源码编译不过,尝试修改无果,将函数指针传入atomic_func,函数修改为无参,控制共享内存对象的指针操作</span></span><br><span class="line">	atomic_sharedmemory-&gt;atomic_func(pf);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *atomic_sharedmemory-&gt;find&lt;<span class="keyword">int</span>&gt;(<span class="string">"Integer_1"</span>).first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *atomic_sharedmemory-&gt;find&lt;<span class="keyword">float</span>&gt;(<span class="string">"Float_1"</span>).first &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	boost::interprocess::shared_memory_object::remove(<span class="string">"luer"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//boost库中thread里的mutex同步方法,适用于同一进程,不同进程的数据同步需要使用nameed_mutex,此类位于interprocess/sync下</span></span><br><span class="line">	boost::<span class="function">interprocess::managed_shared_memory <span class="title">mutex_sharedmemory</span><span class="params">(boost::interprocess::open_or_create, <span class="string">"luer"</span>, <span class="number">1024</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="comment">//第一个参数指定打开/创建,第二个参数是锁的名字,知道锁名称的应用程序都能访问到锁</span></span><br><span class="line">	boost::<span class="function">interprocess::named_mutex <span class="title">mutex</span><span class="params">(boost::interprocess::open_or_create, <span class="string">"mtx"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span>* iiii = mutex_sharedmemory.find_or_construct&lt;<span class="keyword">int</span>&gt;(<span class="string">"Mutex_Integer"</span>)();</span><br><span class="line"></span><br><span class="line">	mutex.lock();</span><br><span class="line">	++(*iiii);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *iiii &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	mutex.unlock();</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//interprocess_mutex可以由共享内存对象构建出来,返回指针</span></span><br><span class="line">	boost::interprocess::interprocess_mutex* mutex = mutex_sharedmemory.find_or_construct&lt;boost::interprocess::interprocess_mutex&gt;(<span class="string">"mtx"</span>)();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span>* iiii = mutex_sharedmemory.find_or_construct&lt;<span class="keyword">int</span>&gt;(<span class="string">"Mutex_Integer"</span>)();</span><br><span class="line"></span><br><span class="line">	mutex-&gt;lock();</span><br><span class="line">	++(*iiii);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *iiii &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	mutex-&gt;unlock();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习boost的容器"><a href="#学习boost的容器" class="headerlink" title="学习boost的容器"></a>学习boost的容器</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习boost的容器</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0 </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//#include &lt;boost/array.hpp&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/unordered_set.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/unordered_map.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/bimap.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/bimap/multiset_of.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果是自定义的类型,boost不能识别,需要自己提供==运算符和hash_value函数计算哈希值</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	person(<span class="built_in">std</span>::<span class="built_in">string</span> name, <span class="keyword">int</span> age) :_name(name), _age(age)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">bool</span> <span class="keyword">operator</span>==(<span class="keyword">const</span> person&amp; p)<span class="keyword">const</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> p._name == _name &amp;&amp; p._age == _age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//boost库示例代码为person const&amp; p,本质没有区别,个人习惯而已</span></span><br><span class="line">	<span class="comment">//const放在指针左右才有区别,左值右向</span></span><br><span class="line">	<span class="function"><span class="keyword">size_t</span> <span class="title">hash_value</span><span class="params">(<span class="keyword">const</span> person&amp; p)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">size_t</span> result = <span class="number">0</span>;</span><br><span class="line">		boost::hash_combine(result, p._name);</span><br><span class="line">		boost::hash_combine(result, p._age);</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> _name;</span><br><span class="line">	<span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="keyword">typedef</span> boost::<span class="built_in">array</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, 3&gt; <span class="built_in">array</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//C++初始化方式</span></span><br><span class="line">	<span class="built_in">array</span> a&#123; <span class="string">"lubaobao"</span>,<span class="string">"love"</span>,<span class="string">"lubaobao"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	a[<span class="number">0</span>] = <span class="string">"lubaobao"</span>;</span><br><span class="line">	a.at(<span class="number">1</span>) = <span class="string">"love"</span>;</span><br><span class="line">	a[<span class="number">2</span>] = <span class="string">"lubaobao"</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//rend()不可以赋值,反向迭代器返回数组第一个元素前面的位置</span></span><br><span class="line">	<span class="comment">//rbegin()指向数组最后一个元素的位置</span></span><br><span class="line">	<span class="comment">//end()指向数组最后一个元素后面的位置</span></span><br><span class="line">	<span class="comment">//begin()指向数组第一个元素的位置</span></span><br><span class="line">	* a.rbegin() = <span class="string">"fujunjun"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> e : a)</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="keyword">typedef</span> boost::<span class="built_in">unordered_set</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; un_set;</span><br><span class="line">	un_set* s = <span class="keyword">new</span> un_set();</span><br><span class="line"></span><br><span class="line">	s-&gt;insert(<span class="string">"lubaobao"</span>);</span><br><span class="line">	s-&gt;insert(<span class="string">"taixihuan"</span>);</span><br><span class="line">	s-&gt;insert(<span class="string">"fujunjun le"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//此处的iterator是un_set下的,不是boost::unordered_set命名空间下的</span></span><br><span class="line">	<span class="comment">//::作用域限定符,表示作用域和所属关系</span></span><br><span class="line">	<span class="keyword">for</span> (un_set::iterator it = s-&gt;begin(); it != s-&gt;end(); ++it)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *it &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> e : *s)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="keyword">typedef</span> boost::<span class="built_in">unordered_map</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="keyword">int</span>&gt; un_map;</span><br><span class="line">	un_map* um = <span class="keyword">new</span> un_map();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//此处的value_type是un_map所属,不是命名空间所属</span></span><br><span class="line">	um-&gt;insert(un_map::value_type(<span class="string">"lubaobao"</span>, <span class="number">0</span>));</span><br><span class="line">	um-&gt;insert(un_map::value_type(<span class="string">"fujunjun"</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> e : *um)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.first &lt;&lt; <span class="string">","</span> &lt;&lt; e.second &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; (um-&gt;find(<span class="string">"lubaobao"</span>) != um-&gt;end()) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">typedef</span> boost::bimap&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="keyword">int</span>&gt; bi_map;</span><br><span class="line">	bi_map* bm = <span class="keyword">new</span> bi_map();</span><br><span class="line"></span><br><span class="line">	bm-&gt;insert(bi_map::value_type(<span class="string">"lubaobao"</span>, <span class="number">18</span>));</span><br><span class="line">	bm-&gt;insert(bi_map::value_type(<span class="string">"fujunjun"</span>, <span class="number">24</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">//auto for中使用:,C#中的auto使用in</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">auto</span> e : *bm)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; e.left &lt;&lt; <span class="string">" is "</span> &lt;&lt; e.right &lt;&lt; <span class="string">" years old"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">typedef</span> boost::bimap&lt;boost::bimaps::set_of&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;, boost::bimaps::multiset_of&lt;<span class="keyword">int</span>&gt;&gt; multi_bi_map;</span><br><span class="line">	multi_bi_map* mbm = <span class="keyword">new</span> multi_bi_map();</span><br><span class="line"></span><br><span class="line">	mbm-&gt;insert(multi_bi_map::value_type(<span class="string">"lubaobao"</span>, <span class="number">18</span>));</span><br><span class="line">	mbm-&gt;insert(multi_bi_map::value_type(<span class="string">"fujunjun"</span>, <span class="number">18</span>));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; mbm-&gt;right.count(<span class="number">18</span>) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习boost的数据结构"><a href="#学习boost的数据结构" class="headerlink" title="学习boost的数据结构"></a>学习boost的数据结构</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//学习boost的数据结构</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/tuple/tuple.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此头文件用于将tuple写入流中</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/tuple/tuple_io.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类似于python的弱类型</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/any.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/variant.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line">boost::tuple&lt;std::string, int&gt; Func()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//使用boost命名空间下的make_tuple也可以创建一个元组</span></span><br><span class="line">	<span class="keyword">return</span> boost::make_tuple(<span class="string">"Error_message"</span>, <span class="number">1024</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="comment">//元组,与pair不同的是,pair只能存两个不同类型的变量,而tuple可以存无限个</span></span><br><span class="line">	boost::tuple &lt;<span class="built_in">std</span>::<span class="built_in">string</span>, <span class="built_in">std</span>::<span class="built_in">string</span>, <span class="keyword">int</span>&gt; tp(<span class="string">"lubaobao"</span>, <span class="string">"fujunjun"</span>, <span class="number">9999999</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; tp &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用对象+.访问get函数,&lt;&gt;中为索引号</span></span><br><span class="line">	<span class="comment">//使用boost命名空间下的get函数,&lt;&gt;中索引号,参数为元组对象</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//索引值的合法性会在编译时检查</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; tp.get&lt;<span class="number">0</span>&gt;() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::get&lt;<span class="number">1</span>&gt;(tp) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	<span class="keyword">typedef</span> boost::tuple &lt;<span class="built_in">std</span>::<span class="built_in">string</span>&amp;, <span class="built_in">std</span>::<span class="built_in">string</span>&amp;, <span class="keyword">int</span>&amp;&gt;	tp;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">string</span> my_name = <span class="string">"fujunjun"</span>;</span><br><span class="line">	<span class="built_in">string</span> my_wife_name = <span class="string">"lubaobao"</span>;</span><br><span class="line">	<span class="keyword">int</span> we_together_time = <span class="number">9999999</span>;</span><br><span class="line"></span><br><span class="line">	tp _tp = boost::tie(my_name, my_wife_name, we_together_time);</span><br><span class="line">	we_together_time = <span class="number">999999999</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; _tp &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//boost库的拆箱操作</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> error_msg;</span><br><span class="line">	<span class="keyword">int</span> error_code;</span><br><span class="line"></span><br><span class="line">	boost::tie(error_msg, error_code) = Func();</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; error_msg &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; error_code &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	boost::any any_type_a = <span class="number">1</span>;</span><br><span class="line">	any_type_a = <span class="literal">true</span>;</span><br><span class="line">	<span class="comment">//any_type_a = "lu he tu";</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//但是不能直接输出,还是需要类型转换</span></span><br><span class="line">	<span class="comment">//类型转换错误的话,会抛出bad_any_cast的异常</span></span><br><span class="line">	<span class="keyword">try</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::any_cast&lt;<span class="keyword">int</span>&gt;(any_type_a) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span> (<span class="keyword">const</span> boost::bad_any_cast&amp; ec)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cerr</span> &lt;&lt; ec.what() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//用any_cast指向一个any类型</span></span><br><span class="line">	boost::any any_int = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//为了便于理解,此处写为 *i,事实上int* i和int *i是一样的,i是一个int型的指针,*i是一个int变量</span></span><br><span class="line">	<span class="comment">//any_cast的&lt;&gt;中为要转换后的变量类型,此处为int,()中为参数,传入的是any类型变量的地址</span></span><br><span class="line">	<span class="keyword">int</span> *i = boost::any_cast&lt;<span class="keyword">int</span>&gt;(&amp;any_int);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; *i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	boost::variant&lt;<span class="keyword">double</span>, <span class="keyword">int</span>, <span class="built_in">std</span>::<span class="built_in">string</span>&gt; v;</span><br><span class="line">	v = <span class="number">37.13</span>;</span><br><span class="line">	v = <span class="number">37</span>;</span><br><span class="line">	v = <span class="string">"lubaobao love fujunjun"</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; boost::get&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt;(v) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="学习boost的序列化"><a href="#学习boost的序列化" class="headerlink" title="学习boost的序列化"></a>学习boost的序列化</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sstream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/archive/text_oarchive.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/archive/text_iarchive.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/archive/xml_oarchive.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;boost/archive/xml_iarchive.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ios::app：　　　		//以追加的方式打开文件  </span></span><br><span class="line"><span class="comment">//ios::ate：　　　		//文件打开后定位到文件尾，ios:app就包含有此属性  </span></span><br><span class="line"><span class="comment">//ios::binary：　		//以二进制方式打开文件，缺省的方式是文本方式。两种方式的区别见前文  </span></span><br><span class="line"><span class="comment">//ios::in：　　　		//文件以输入方式打开（文件数据输入到内存）  </span></span><br><span class="line"><span class="comment">//ios::out：　　　		//文件以输出方式打开（内存数据输出到文件）  </span></span><br><span class="line"><span class="comment">//ios::nocreate：		//不建立文件，所以文件不存在时打开失败  </span></span><br><span class="line"><span class="comment">//ios::noreplace：		//不覆盖文件，所以打开文件时如果文件存在失败  </span></span><br><span class="line"><span class="comment">//ios::trunc：　		//如果文件存在，把文件长度设为0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Save</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">//std::ios::out 文件不存在则创建,存在则打开</span></span><br><span class="line">	<span class="function"><span class="built_in">std</span>::fstream <span class="title">fs</span><span class="params">(<span class="string">"text.txt"</span>, <span class="built_in">std</span>::ios::out)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (fs.is_open())</span><br><span class="line">	&#123;</span><br><span class="line">		boost::<span class="function">archive::text_oarchive <span class="title">oa</span><span class="params">(fs)</span></span>;</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">		oa &lt;&lt; i;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Load</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="function"><span class="built_in">std</span>::fstream <span class="title">fs</span><span class="params">(<span class="string">"text.txt"</span>, <span class="built_in">std</span>::ios::in)</span></span>;</span><br><span class="line">	<span class="keyword">if</span> (fs.is_open())</span><br><span class="line">	&#123;</span><br><span class="line">		boost::<span class="function">archive::text_iarchive <span class="title">ia</span><span class="params">(fs)</span></span>;</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">		ia &gt;&gt; i;</span><br><span class="line">		<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">stringstream</span> ss;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	Person()</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	Person(<span class="keyword">int</span> age, <span class="built_in">std</span>::<span class="built_in">string</span> name) :_age(age), _name(name)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//此处的const本质是给成员函数的this指针加const限定,不允许修改成员变量,除非成员变量使用mutable修饰</span></span><br><span class="line">	<span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span><span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="title">name</span><span class="params">()</span><span class="keyword">const</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> _name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">	<span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">boost</span>:</span>:serialization::access;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">template</span>&lt;<span class="keyword">typename</span> Archive&gt;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">serialize</span><span class="params">(Archive&amp; ar, <span class="keyword">const</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> version)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="comment">//ar&amp; _age;</span></span><br><span class="line">		<span class="function">ar&amp; <span class="title">BOOST_SERIALIZATION_NVP</span><span class="params">(_age)</span></span>;</span><br><span class="line">		<span class="function">ar&amp; <span class="title">BOOST_SERIALIZATION_NVP</span><span class="params">(_name)</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> _name;</span><br><span class="line">	<span class="keyword">int</span> _age;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Save</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	boost::<span class="function">archive::text_oarchive <span class="title">oa</span><span class="params">(ss)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">18</span>, <span class="string">"lubaobao"</span>)</span></span>;</span><br><span class="line">	oa &lt;&lt; p;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="function"><span class="built_in">std</span>::fstream <span class="title">fs</span><span class="params">(<span class="string">"text.xml"</span>, <span class="built_in">std</span>::ios::out)</span></span>;</span><br><span class="line">	boost::<span class="function">archive::xml_oarchive <span class="title">oa</span><span class="params">(fs)</span></span>;</span><br><span class="line">	<span class="function">Person <span class="title">p</span><span class="params">(<span class="number">18</span>, <span class="string">"lubaobao"</span>)</span></span>;</span><br><span class="line">	oa &lt;&lt; BOOST_SERIALIZATION_NVP(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Load</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	boost::<span class="function">archive::text_iarchive <span class="title">ia</span><span class="params">(ss)</span></span>;</span><br><span class="line">	Person p;</span><br><span class="line">	ia &gt;&gt; p;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; p.age() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">	<span class="function"><span class="built_in">std</span>::fstream <span class="title">fs</span><span class="params">(<span class="string">"text.xml"</span>, <span class="built_in">std</span>::ios::in)</span></span>;</span><br><span class="line">	boost::<span class="function">archive::xml_iarchive <span class="title">ia</span><span class="params">(fs)</span></span>;</span><br><span class="line">	Person p;</span><br><span class="line">	ia &gt;&gt; BOOST_SERIALIZATION_NVP(p);</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; p.age() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; p.name() &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 0</span></span><br><span class="line">	boost::<span class="function">archive::text_oarchive <span class="title">oa</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">cout</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	oa &lt;&lt; <span class="number">1</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">	Save();</span><br><span class="line">	Load();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="Linux下的编译"><a href="#Linux下的编译" class="headerlink" title="Linux下的编译"></a>Linux下的编译</h2><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">all:string_boost filesystem_boost asio_boost socket_boost sharedmemory_boost container_boost datastructure_boost serialize_boost</span></span><br><span class="line">LIB=-I /home/luzihan/boost_1_74_0/<span class="keyword">include</span> -L /home/luzihan/boost_1_74_0/lib </span><br><span class="line"></span><br><span class="line"><span class="section">string_boost:string_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span></span><br><span class="line"><span class="section">filesystem_boost:filesystem_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span> -lboost_system -lboost_filesystem</span><br><span class="line"><span class="section">asio_boost:asio_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span> -lboost_system-mt -lboost_thread-mt -lpthread</span><br><span class="line"><span class="section">socket_boost:socket_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span> -lpthread</span><br><span class="line"><span class="section">sharedmemory_boost:sharedmemory_boost.cpp</span></span><br><span class="line">	g++ <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span>  -pthread -lrt</span><br><span class="line"><span class="section">container_boost:container_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span></span><br><span class="line"><span class="section">datastructure_boost:datastructure_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span></span><br><span class="line"><span class="section">serialize_boost:serialize_boost.cpp</span></span><br><span class="line">	g++ -std=c++11 <span class="variable">$^</span> -o <span class="variable">$@</span> <span class="variable">$(LIB)</span> -lboost_serialization</span><br><span class="line"><span class="section">clean:</span></span><br><span class="line">	rm string_boost filesystem_boost asio_boost socket_boost sharedmemory_boost container_boost datastructure_boost serialize_boost</span><br></pre></td></tr></table></figure>
          
            <div class='article_footer'>
              
                
  
    
    



  

  
    
    



  

  
    
    

<section class="widget copyright  desktop mobile">
  <div class='content'>
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href=https://www.lubaobao.xyz/2020/10/30/C++Boost/>https://www.lubaobao.xyz/2020/10/30/C++Boost/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2020-11-03T10:35:03+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：Nov 3, 2020</p>
  </a>
</div>

        
      
        
          

        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.lubaobao.xyz/2020/10/30/C++Boost/&title=【CPP】C++的boost学习 - AustinYAN's Blog&summary=学习C++的boost库,了解其中的一些方法"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.lubaobao.xyz/2020/10/30/C++Boost/&title=【CPP】C++的boost学习 - AustinYAN's Blog&summary=学习C++的boost库,了解其中的一些方法"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=https://www.lubaobao.xyz/2020/10/30/C++Boost/&title=【CPP】C++的boost学习 - AustinYAN's Blog&summary=学习C++的boost库,了解其中的一些方法"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class='prev' href='/2021/01/29/WPF-Package&Install/'>
                <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>使用WPF制作打包、安装工具</p>
                <p class='content'>在安装软件时，发现人家的安装界面跟msi和一些打包工具做出来的不太一样，主要是人家的有自己定制的界面，就感觉很棒很酷炫，加上最近刚好需要一个打包的功能，我就做了一个类似的，美观程度还没有优化，只...</p>
              </a>
            
            
              <a class='next' href='/2020/10/16/WPF-Blend&Animation/'>
                <p class='title'>使用Blend For VS制作WPF动画<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class='content'>WPF的强势之处在于不但可以很方便的画出漂亮的静态界面，也可以很方便的做出动画效果


连续动画基础的Storyboard、时间线什么的概念就不在这里写了，因为这个博客也就是我自己记录自己学习的...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class='fas fa-comments'></i> 评论</p>
      
      
      
        <section id="comments">
          <div id="lv-container" data-id="city" data-uid="MTAyMC81MDgyNy8yNzMwOQ">
            <noscript><div><i class='fas fa-exclamation-triangle'>&nbsp;Unable to load Livere, please make sure your network can access.</div></noscript>
          </div>
        </section>
      
      
      
      
      
    </section>
  </article>


    




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: '【CPP】C++的boost学习',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
  

  
    
    


  <section class="widget toc-wrapper shadow desktop mobile">
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#boost库的学习"><span class="toc-text">boost库的学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#学习字符串处理"><span class="toc-text">学习字符串处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习文件系统"><span class="toc-text">学习文件系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习智能指针"><span class="toc-text">学习智能指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一个简单理解多态的Demo"><span class="toc-text">一个简单理解多态的Demo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习函数对象"><span class="toc-text">学习函数对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习事件处理"><span class="toc-text">学习事件处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习多线程"><span class="toc-text">学习多线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习异步输入输出"><span class="toc-text">学习异步输入输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习boost的网络编程-未完"><span class="toc-text">学习boost的网络编程(未完)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习进程间通讯"><span class="toc-text">学习进程间通讯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习boost的容器"><span class="toc-text">学习boost的容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习boost的数据结构"><span class="toc-text">学习boost的数据结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#学习boost的序列化"><span class="toc-text">学习boost的序列化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Linux下的编译"><span class="toc-text">Linux下的编译</span></a></li></ol>
    </div>
  </section>


  


</aside>



<footer class="clearfix">
  <br><br>
  
  
  <div class="aplayer-container">
    

  
    <meting-js
      theme='#1BCDFC'
      autoplay='true'
      volume='0.7'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='340px'
      server='netease'
      type='playlist'
      id='395143331'
      list-folded='true'>
    </meting-js>
  


  </div>
  
  
  
  <br>
  <div class="social-wrapper">
    
    
    <a href="/atom.xml" class="social fas fa-rss flat-btn" target="_blank"
      rel="external nofollow noopener noreferrer">
    </a>
    
          
    
    <a href="mailto:austinyanlzh@gmail.com" class="social fas fa-envelope flat-btn" target="_blank"
      rel="external nofollow noopener noreferrer">
    </a>
    
          
    
    <a href="https://github.com/AustinYANyh" class="social fab fa-github flat-btn" target="_blank"
      rel="external nofollow noopener noreferrer">
    </a>
    
          
    
    <a href="https://music.163.com/#/user/home?id=286524796" class="social fas fa-headphones-alt flat-btn" target="_blank"
      rel="external nofollow noopener noreferrer">
    </a>
    
          
  </div>
  
  
  
  <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
  
  
  
  Use
  <a href="https://volantis.js.org/" target="_blank" class="codename">Volantis</a>
  as theme, total visits
  <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
  times
  
  
  
  
  <div class='copyright'>
    <p><a href="https://lubaobao.xyz" target="_blank" rel="noopener">Copyright © 2017-2020 AustinYAN</a></p>

  </div>
  
  
  <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
  <script>
    var now = new Date();
    function createtime() {
      var grt = new Date("06/12/2020 09:38:00");//在此处修改你的建站时间，格式：月/日/年 时:分:秒
      now.setTime(now.getTime() + 250);
      days = (now - grt) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
      hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
      if (String(hnum).length == 1) { hnum = "0" + hnum; } minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);
      mnum = Math.floor(minutes); if (String(mnum).length == 1) { mnum = "0" + mnum; }
      seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
      snum = Math.round(seconds); if (String(snum).length == 1) { snum = "0" + snum; }
      document.getElementById("timeDate").innerHTML = "本站已安全运行 " + dnum + " 天 ";
      document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";
    }
    setInterval("createtime()", 250);
  </script>
  <i class="fas fa-chart-area"></i>
  <span class="post-count">字数统计：41.7k</span>
  <script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279069821'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/z_stat.php%3Fid%3D1279069821%26show%3Dpic2' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d28bb0b02349817f8859801d0c9663a2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <br>
</footer>

<script>setLoadingBarProgress(80);</script>

      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script defer src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  





  <script type="text/javascript">
    (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];
      if (typeof LivereTower === 'function') { return; }
      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;
      e.parentNode.insertBefore(j, e);
    })(document, 'script');
  </script>









  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 标准 markdown 描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>




  <script>setLoadingBarProgress(100);</script>
  <!-- 数字雨 -->
  <canvas id="canvas" width="1440" height="900"></canvas>
  <script type="text/javascript" src="/js/DigitalRain.js"></script>

  <!--鼠标烟花-->
  <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"></canvas>
  <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
  <script type="text/javascript" src="/js/firework.js"></script>

  <!--预加载-->
  <script src="https://cdn.jsdelivr.net/gh/TRHX/CDN-for-itrhx.com@2.0.2/js/instantclick-1.2.2.js"
    type="module"></script>
</body>

</html>